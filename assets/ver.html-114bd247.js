import{_ as d,r as o,o as p,c as r,g as i,a as t,b as n,d as a,w as e,e as l}from"./app-ef6f9170.js";const u={},c=t("h1",{id:"获取最新-app-版本",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#获取最新-app-版本","aria-hidden":"true"},"#"),n(" 获取最新 APP 版本")],-1),b=t("h2",{id:"获取版本信息",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#获取版本信息","aria-hidden":"true"},"#"),n(" 获取版本信息")],-1),h=t("blockquote",null,[t("p",null,"https://app.bilibili.com/x/v2/version")],-1),k=t("p",null,[t("em",null,"请求方法: GET")],-1),v=l(`<p><strong>URL参数:</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>mobi_app</td><td>str</td><td>目标客户端类型</td><td>不必要</td><td>留空为最新有更新的平台<br>android: Android 版<br>iphone: iPhone 版<br>ipad: iPad HD 版<br>win: UWP 版<br>android_tv_yst: TV 版<br>android_car: 车机版<br>pc_client: PC 客户端</td></tr></tbody></table><p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>返回值</td><td>0: 成功</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为 <code>0</code></td></tr><tr><td>ttl</td><td>int</td><td>1</td><td></td></tr><tr><td>data</td><td>array</td><td>版本信息列表</td><td></td></tr></tbody></table><p><code>data</code> 数组中的对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>plat</td><td>int</td><td>平台</td><td>0: Android<br>1: iPhone<br>2: iPad HD<br>3: UWP<br>12: TV 版<br>35: 车机版<br>40: PC 客户端</td></tr><tr><td>desc</td><td>str</td><td>版本描述</td><td></td></tr><tr><td>version</td><td>str</td><td>版本号</td><td></td></tr><tr><td>build</td><td>int</td><td>内部版本号</td><td></td></tr></tbody></table><p><strong>示例:</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://app.bilibili.com/x/v2/version&#39;</span> <span class="token punctuation">\\</span>
--url-query<span class="token string">&#39;mobi_app=android&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;plat&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;-修复了一些bug，切了个大西瓜~&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.9.0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token number">8090300</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ptime&quot;</span><span class="token operator">:</span> <span class="token number">1723612377</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;plat&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[修正]横屏状态下,视频列表加载失败的问题\\n[修正]超过48kHz采样率的音频无法播放的问题\\n[修正]部分系统黑屏的问题\\nPS:帮下面的同学祈祷早日上架&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ptime&quot;</span><span class="token operator">:</span> <span class="token number">1382630400</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="版本升级" tabindex="-1"><a class="header-anchor" href="#版本升级" aria-hidden="true">#</a> 版本升级</h2><blockquote><p>https://app.bilibili.com/x/v2/version/fawkes/upgrade</p></blockquote><p><em>请求方式: GET</em></p>`,13),m=t("p",null,[t("strong",null,"URL参数:")],-1),_=t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"类型"),t("th",null,"内容"),t("th",null,"必要性"),t("th",null,"备注")])],-1),q=t("tr",null,[t("td",null,"abi"),t("td",null,"str"),t("td",null,"设备 CPU ABI"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"arm64-v8a")])],-1),g=t("tr",null,[t("td",null,"appid"),t("td",null,"str"),t("td",null,"客户端类型"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"tv.danmaku.bili")])],-1),y=t("tr",null,[t("td",null,"brand"),t("td",null,"str"),t("td",null,"设备品牌"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"google")])],-1),P=t("tr",null,[t("td",null,"build"),t("td",null,"int"),t("td",null,"当前 APP 版本号"),t("td",null,"必要"),t("td",null,[n("如 "),t("code",null,"8000200")])],-1),f=t("tr",null,[t("td",null,"channel"),t("td",null,"str"),t("td",null,"APP 分发渠道"),t("td",null,"必要"),t("td",null,[n("如 "),t("code",null,"master")])],-1),x=t("td",null,"deviceid",-1),A=t("td",null,"str",-1),w=t("td",null,"设备唯一 ID",-1),U=t("td",null,"不必要",-1),N=t("tr",null,[t("td",null,"env"),t("td",null,"str"),t("td",null,"APP 分发环境"),t("td",null,"不必要"),t("td",null,[n("默认 "),t("code",null,"prod")])],-1),V=t("tr",null,[t("td",null,"iv"),t("td",null,"int"),t("td",null,"当前 APP innerVer"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"8000210")])],-1),j=t("tr",null,[t("td",null,"mobi_app"),t("td",null,"str"),t("td",null,"APP mobi_app"),t("td",null,"必要"),t("td",null,[n("如 "),t("code",null,"android")])],-1),D=t("tr",null,[t("td",null,"model"),t("td",null,"str"),t("td",null,"设备型号"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"Pixel 2 XL")])],-1),L=t("tr",null,[t("td",null,"nt"),t("td",null,"str"),t("td",null,"-"),t("td",null,"必要"),t("td",null,[n("默认 "),t("code",null,"1")])],-1),C=t("tr",null,[t("td",null,"ov"),t("td",null,"str"),t("td",null,"设备 OS 版本"),t("td",null,"必要"),t("td",null,[n("安卓即 API Level，如 Android 11 为 "),t("code",null,"30")])],-1),R=t("tr",null,[t("td",null,"platform"),t("td",null,"str"),t("td",null,"设备平台"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"android")])],-1),B=t("tr",null,[t("td",null,"screen"),t("td",null,"str"),t("td",null,"设备屏幕参数"),t("td",null,"不必要"),t("td",null,[n("如 "),t("code",null,"2712_1440@537.882_537.882")])],-1),T=t("tr",null,[t("td",null,"sn"),t("td",null,"int"),t("td",null,"当前 APP SN"),t("td",null,"必要"),t("td",null,[n("如 "),t("code",null,"15088473")])],-1),I=t("tr",null,[t("td",null,"vn"),t("td",null,"str"),t("td",null,"当前 APP 版本名称"),t("td",null,"必要"),t("td",null,[n("如 "),t("code",null,"8.0.0")])],-1),S=t("p",null,[t("strong",null,"标头参数（Headers）：")],-1),G=t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"类型"),t("th",null,"内容"),t("th",null,"必要性"),t("th",null,"备注")])],-1),H=t("td",null,"app-key",-1),E=t("td",null,"str",-1),O=t("td",null,"APPKey 名称",-1),z=t("td",null,"必要",-1),J=t("code",null,"mobi_app",-1),X=t("code",null,"android64",-1),K=t("td",null,"buvid",-1),W=t("td",null,"str",-1),M=t("td",null,"BUVID",-1),F=t("td",null,"必要",-1),Q=l(`<p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>int</td><td>返回值</td><td>0: 成功<br>-304: 木有改动<br>-400: 请求异常</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为 <code>0</code></td></tr><tr><td>ttl</td><td>int</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code> 对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>title</td><td>str</td><td>标题</td><td></td></tr><tr><td>content</td><td>str</td><td>内容</td><td></td></tr><tr><td>version</td><td>str</td><td>最新版本名称</td><td></td></tr><tr><td>version_code</td><td>int</td><td>最新版本号</td><td>即 <code>build</code></td></tr><tr><td>url</td><td>str</td><td>下载地址</td><td></td></tr><tr><td>size</td><td>int</td><td>大小</td><td>单位字节</td></tr><tr><td>md5</td><td>str</td><td>MD5 值</td><td></td></tr><tr><td>silent</td><td>int</td><td>是否静默安装?</td><td></td></tr><tr><td>upgrade_type</td><td>int</td><td>升级类型?</td><td></td></tr><tr><td>cycle</td><td>int</td><td>升级周期?</td><td></td></tr><tr><td>policy</td><td>int</td><td>升级策略?</td><td></td></tr><tr><td>policy_url</td><td>str</td><td>升级策略链接?</td><td></td></tr><tr><td>ptime</td><td>int</td><td>发布时间</td><td></td></tr></tbody></table><p><strong>示例:</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://app.bilibili.com/x/v2/version/fawkes/upgrade&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;build=1145141&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;channel=apt&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;mobi_app=android&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;nt=awa&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;ov=qwq&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;platform=archlinux&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;sn=919810&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;vn=!!!&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;升级提醒&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;-修复了一些bug，并吃了一桶冰淇凌~\\n-记得检查暑假作业哦！&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.10.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;version_code&quot;</span><span class="token operator">:</span> <span class="token number">8100300</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://dl.hdslb.com/mobile/pack/android64/15793300/iBiliPlayer-apinkRelease-8.10.0-b15793300.apk&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">132432843</span><span class="token punctuation">,</span>
        <span class="token property">&quot;md5&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f196c0ea68ff894dab0cf380cafad802&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;silent&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;upgrade_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;cycle&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;policy&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;policy_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_gray&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ptime&quot;</span><span class="token operator">:</span> <span class="token number">1724207041</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="拼接最新版本下载地址" tabindex="-1"><a class="header-anchor" href="#拼接最新版本下载地址" aria-hidden="true">#</a> 拼接最新版本下载地址</h2><blockquote><p>https://api.bilibili.com/x/web-frontend/getappversion</p></blockquote><p><em>请求方法: GET</em></p><p><strong>URL参数:</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>target</td><td>string</td><td>目标平台</td><td>目测仅 <code>pc_electron</code>, 错误的值会导致返回 <code>HTTP 404</code></td><td></td></tr><tr><td>cdn_url</td><td>string</td><td>CDN URL</td><td>任意字符串, 默认 <code>https://dl.hdslb.com/mobile/fixed/bili_win/bili_win-install.exe</code></td><td></td></tr></tbody></table><p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>返回值</td><td>0: 成功<br>-1: need target</td></tr><tr><td>message</td><td>string</td><td>错误消息</td><td>成功时无此项</td></tr></tbody></table><p><code>data</code> 对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>cdn_url</td><td>string</td><td>CDN URL</td><td>内容同请求参数 <code>cdn_url</code></td></tr><tr><td>sole_cdn_url</td><td>string</td><td>带版本的 CDN URL</td><td><code>cdn_url + &quot;?v=&quot; + 最新版本</code></td></tr></tbody></table><p><strong>示例:</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.bilibili.com/x/web-frontend/getappversion&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;target=pc_electron&#39;</span> <span class="token punctuation">\\</span>
--url-query <span class="token string">&#39;cdn_url=https://dl.hdslb.com/mobile/fixed/bili_win/bili_win-install.exe&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;cdn_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://dl.hdslb.com/mobile/fixed/bili_win/bili_win-install.exe&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sole_cdn_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://dl.hdslb.com/mobile/fixed/bili_win/bili_win-install.exe?v=1.16.1-2&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,21);function Y(Z,$){const s=o("RouterLink");return p(),r("div",null,[c,b,h,k,i(`{
  "from": {
    "url": "https://app.bilibili.com/"
  }
}`),v,t("p",null,[n("鉴权方式（非必须）："),a(s,{to:"/docs/misc/sign/APP.html"},{default:e(()=>[n("APP API 签名与鉴权")]),_:1})]),m,t("table",null,[_,t("tbody",null,[q,g,y,P,f,t("tr",null,[x,A,w,U,t("td",null,[n("即 XU-Prefixed BUVID，见 "),a(s,{to:"/docs/misc/device_identity.html"},{default:e(()=>[n("device_identity")]),_:1})])]),N,V,j,D,L,C,R,B,T,I])]),S,t("table",null,[G,t("tbody",null,[t("tr",null,[H,E,O,z,t("td",null,[n("大体等同于 "),a(s,{to:"/docs/misc/sign/APPKey.html"},{default:e(()=>[J]),_:1}),n("。特别地：64 位版本粉版客户端应为 "),X])]),t("tr",null,[K,W,M,F,t("td",null,[n("XU-Prefixed BUVID，见 "),a(s,{to:"/docs/misc/device_identity.html"},{default:e(()=>[n("device_identity")]),_:1})])])])]),Q])}const nt=d(u,[["render",Y],["__file","ver.html.vue"]]);export{nt as default};
