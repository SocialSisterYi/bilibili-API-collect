import{_ as s,r as o,o as r,c as i,a as d,b as t,d as n,g as p,e as a}from"./app-ef6f9170.js";const c={},l=a('<h1 id="b23-tv-短链" tabindex="-1"><a class="header-anchor" href="#b23-tv-短链" aria-hidden="true">#</a> b23.tv 短链</h1><h2 id="简述" tabindex="-1"><a class="header-anchor" href="#简述" aria-hidden="true">#</a> 简述</h2><p>b23.tv 是由 Bilibili 提供的短链服务, 主要用于站内长链接缩短便于分享, 目前仅在手机客户端生成</p><h3 id="格式" tabindex="-1"><a class="header-anchor" href="#格式" aria-hidden="true">#</a> 格式</h3><p>目前<!--我-->已知的 b23.tv 短链格式有以下 3 种</p><ul><li><p>任意短链, 路径由7位数字或大小写英文字母组成, 为防止滥用似乎有时效限制, 如 https://b23.tv/pigt3PQ</p></li><li><p>视频短链(AV号), 路径由字符串 <code>av</code> 尾随 视频 aid 组成, 如 https://b23.tv/av80433022</p></li><li><p>视频短链(BV号), 路径由字符串 <code>BV</code> 尾随 视频 bvid 组成, 如 https://b23.tv/BV1GJ411x7h7</p></li></ul><h2 id="生成" tabindex="-1"><a class="header-anchor" href="#生成" aria-hidden="true">#</a> 生成</h2><h3 id="视频短链" tabindex="-1"><a class="header-anchor" href="#视频短链" aria-hidden="true">#</a> 视频短链</h3><ol><li><p>直接手动拼接字符串即可</p></li><li><p>参见<a href="#%E4%BB%BB%E6%84%8F%E7%9F%AD%E9%93%BE">任意短链</a></p></li></ol><h3 id="任意短链" tabindex="-1"><a class="header-anchor" href="#任意短链" aria-hidden="true">#</a> 任意短链</h3><blockquote><p>https://api.bilibili.com/x/share/click<br> https://api.biliapi.net/x/share/click</p></blockquote><p><em>请求方式: POST</em></p><p>认证方式: 仅APP, 但实际上形同虚设</p>',13),u={href:"https://github.com/SocialSisterYi/bilibili-API-collect/issues/979",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/Nemo2011/bilibili-api/pull/720",target:"_blank",rel:"noopener noreferrer"},b=a("<p><strong>正文参数(application/x-www-form-urlencoded):</strong></p><p>必要:</p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>buvid</td><td>str</td><td>设备 BUVID</td><td>必要</td><td>实际任意非空字符串即可</td></tr><tr><td>build</td><td>num</td><td>客户端版本号</td><td>必要</td><td>大于 <code>5520400</code> 的任意有效整数, 如 <code>7710300</code></td></tr><tr><td>platform</td><td>str</td><td>客户端平台</td><td>必要</td><td>实际任意非空字符串即可</td></tr><tr><td>share_channel</td><td>str</td><td>分享方式?</td><td>必要</td><td>COPY</td></tr><tr><td>share_mode</td><td>num</td><td>分享模式?</td><td>必要</td><td>任意有效正整数, 常见 <code>1</code>, <code>3</code>, <code>4</code></td></tr><tr><td>share_id</td><td>str</td><td>分享 ID</td><td>必要</td><td>见下方对照表</td></tr><tr><td>oid</td><td>num</td><td>对象 ID</td><td>必要</td><td>见下方对照表</td></tr></tbody></table><p>不必要:</p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>object_extra_fields</td><td>obj</td><td>额外字段?</td><td>非必要</td><td>如 <code>{&quot;jumpfrom_id&quot;:30104}</code> <code>{&quot;epid&quot;:&quot;409808&quot;,&quot;cid&quot;:&quot;1398781253&quot;}</code> <code>{&quot;season_type&quot;:&quot;1&quot;,&quot;season_id&quot;:&quot;39481&quot;,&quot;epid&quot;:&quot;425006&quot;,&quot;dubbing_support&quot;:false,&quot;background_audio&quot;:false,&quot;role_audio_list&quot;:false}</code></td></tr><tr><td>panel_type</td><td>num</td><td>面板类型?</td><td>非必要</td><td>1</td></tr><tr><td>share_title</td><td>str</td><td>分享标题?</td><td>非必要</td><td>分享标题</td></tr><tr><td>share_content</td><td>str</td><td>分享内容?</td><td>非必要</td><td>分享内容, 当 oid 存在时无意义<s>(可是 oid 不可能不存在啊)</s></td></tr><tr><td>share_origin</td><td>str</td><td>分享来源?</td><td>非必要</td><td>如 <code>vinfo_share</code> <code>dynamic</code> <code>vertical-three-point-panel</code> <code>vinfo_player</code></td></tr><tr><td>share_pattern</td><td>num</td><td>分享模式?</td><td>非必要</td><td>0</td></tr><tr><td>share_session_id</td><td>str</td><td>分享会话 ID?</td><td>非必要</td><td>各部分用 <code>-</code> 分隔的小写的一串 UUID</td></tr><tr><td>ts</td><td>num</td><td>UNIX 秒级时间戳</td><td>非必要</td><td></td></tr></tbody></table><p>对照表:</p><table><thead><tr><th>类型</th><th>分享 ID (share_id)</th><th>对象 ID (oid)</th></tr></thead><tbody><tr><td>视频</td><td>main.ugc-video-detail.0.0.pv</td><td>视频 aid</td></tr></tbody></table>",7),v=a(`<p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段名</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>0</td><td>恒为 0</td></tr><tr><td>message</td><td>str</td><td>0</td><td>恒为 0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td>恒为 1</td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code> 对象:</p><table><thead><tr><th>字段名</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>content</td><td>str</td><td>短链内容</td><td>若失败则不存在</td></tr><tr><td>count</td><td>num</td><td>0</td><td>恒为 0</td></tr></tbody></table><p><strong>示例:</strong></p><p>为 <code>av80433022</code> 生成 b23.tv 短链</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">&quot;http://api.biliapi.net/x/share/click&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;platform=unix&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;share_channel=COPY&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;share_id=main.ugc-video-detail.0.0.pv&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;share_mode=4&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;oid=80433022&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;buvid=qwq&quot;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&quot;build=6114514&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;【【官方 MV】Never Gonna Give You Up - Rick Astley-哔哩哔哩】 https://b23.tv/5x4wy5f&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,9);function m(q,k){const e=o("ExternalLinkIcon");return r(),i("div",null,[l,d("p",null,[t("注: 该接口参数对照表基本失效, 基本无实用价值, 已被注释, 参见 "),d("a",u,[t("#979"),n(e)]),t(),d("a",h,[t("Nemo2011/bilibili-api#720"),n(e)])]),b,p(` 此处被注释是因为以下值均失效
| 动态 | dt.dt-detail.0.0.pv | 动态 id |
| 专栏 | read.column-detail.roof.8.click | 文章 cvid |
| 文集 | read.column-readlist.share.0.click | 文集 rlid |
| 直播 | live.live-room-detail.0.0.pv | 直播 room_id |
| 用户 | main.space-total.more.0.click | 用户 mid |
| 课程 | pugv.pugv-video-detail.0.0.pv | 课程 id? |
| 番剧 | main.space-bangumi.0.0 | 番剧 id? |
| 链接 | public.webview.0.0.pv | ? |
`),v])}const g=s(c,[["render",m],["__file","b23tv.html.vue"]]);export{g as default};
