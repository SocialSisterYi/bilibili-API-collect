import{_ as r,r as p,o as i,c as l,a as t,b as s,d as n,w as e,g as c,e as a}from"./app-ef6f9170.js";const u={},b=a('<h1 id="弹幕操作" tabindex="-1"><a class="header-anchor" href="#弹幕操作" aria-hidden="true">#</a> 弹幕操作</h1><h2 id="发送视频弹幕" tabindex="-1"><a class="header-anchor" href="#发送视频弹幕" aria-hidden="true">#</a> 发送视频弹幕</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/post</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>此接口与漫画弹幕相同</p><p><code>mode=6</code>的逆向弹幕与<code>mode=8</code>的代码弹幕不可发送</p><p><strong>URL参数:</strong></p>',8),m=t("thead",null,[t("tr",null,[t("th",null,"参数名"),t("th",null,"类型"),t("th",null,"内容"),t("th",null,"必要性"),t("th",null,"备注")])],-1),k=t("tr",null,[t("td",null,"web_location"),t("td",null,"str"),t("td",null,"普通视频: 1315873"),t("td",null,"不必要"),t("td")],-1),v=t("tr",null,[t("td",null,"csrf"),t("td",null,"str"),t("td",null,"CSRF Token (即 Cookie 中 bili_jct)"),t("td",null,"Cookie 方式必要"),t("td")],-1),h=t("td",null,"w_rid",-1),g=t("td",null,"str",-1),q=t("td",null,"Wbi 签名",-1),y=t("td",null,"必要",-1),x=t("td",null,"wts",-1),S=t("td",null,"str",-1),f=t("td",null,"UNIX 秒级时间戳",-1),_=t("td",null,"必要",-1),P=a(`<p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP 登录 Token</td><td>APP 方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕<br>2：漫画弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频 cid</td><td>必要</td><td></td></tr><tr><td>msg</td><td>str</td><td>弹幕内容</td><td>必要</td><td>长度小于 100 字符</td></tr><tr><td>bvid</td><td>str</td><td>稿件 bvid</td><td>必要（可选）</td><td>avid 与 bvid 任选一个</td></tr><tr><td>aid</td><td>num</td><td>稿件 avid</td><td>必要（可选）</td><td>avid 与 bvid 任选一个</td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td>非必要</td><td>单位为毫秒<br>默认为0</td></tr><tr><td>color</td><td>num</td><td>弹幕颜色设置</td><td>非必要</td><td>十进制 RGB888 值<br>如<code>16777215</code>为 #FFFFFF 即白色</td></tr><tr><td>fontsize</td><td>num</td><td>弹幕字号设置</td><td>非必要</td><td>默认为 25<br>极小：12<br>超小：16<br>小：18<br>标准：25<br>大：36<br>超大：45<br>极大：64</td></tr><tr><td>pool</td><td>num</td><td>弹幕池选择</td><td>非必要</td><td>0：普通池<br>1：字幕池<br>2：特殊池（代码/BAS弹幕）<br>默认为0</td></tr><tr><td>mode</td><td>num</td><td>弹幕类型选择</td><td>必要</td><td>1：普通弹幕<br>4：底部弹幕<br>5：顶部弹幕<br>7：高级弹幕<br>9：BAS弹幕（<code>pool</code>必须为2）</td></tr><tr><td>rnd</td><td>num</td><td>当前时间戳*1000000</td><td>非必要</td><td><strong>若无此项，则发送弹幕冷却时间限制为90s</strong><br>若有此项，则发送弹幕冷却时间限制为5s</td></tr><tr><td>colorful</td><td>num</td><td>彩色弹幕</td><td>非必要</td><td>60001：专属渐变彩色（需要会员）</td></tr><tr><td>checkbox_type</td><td>num</td><td>是否带 UP 身份标识</td><td>非必要</td><td>0：普通<br>4：带有标识</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于 Cookie）</td><td>Cookie 方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>36700：系统升级中<br>36701：弹幕包含被禁止的内容<br>36702：弹幕长度大于100<br>36703：发送频率过快<br>36704：禁止向未审核的视频发送弹幕<br>36705：您的等级不足，不能发送弹幕<br>36706：您的等级不足，不能发送顶端弹幕<br>36707：您的等级不足，不能发送底端弹幕<br>36708：您的等级不足，不能发送彩色弹幕<br>36709：您的等级不足，不能发送高级弹幕<br>36710：您的权限不足，不能发送这种样式的弹幕<br>36711：该视频禁止发送弹幕<br>36712：level 1用户发送弹幕的最大长度为20<br>36713：稿件未付费<br>36714：弹幕发送时间不合法<br>36715：当日操作数量超过上限<br>36718：目前您不是大会员，无法使用会员权益</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>action</td><td>str</td><td>（？）</td><td></td></tr><tr><td>animation</td><td>str</td><td>弹幕样式 Json？</td><td></td></tr><tr><td>colorful_src</td><td>str 或 obj</td><td>渐变彩色样式信息？</td><td>当请求参数<code>colorful=60001</code>时有效</td></tr><tr><td>dm_content</td><td>str</td><td>（？）</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕 dmid</td><td></td></tr><tr><td>dmid_str</td><td>str</td><td>弹幕 dmid</td><td>字串形式</td></tr><tr><td>visible</td><td>bool</td><td>（？）</td><td></td></tr></tbody></table><p><code>data</code>中的<code>colorful_src</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>type</td><td>num</td><td>60001</td><td></td></tr><tr><td>src</td><td>str</td><td>渐变色样式 Json？</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>为视频<code>av2</code>/<code>BV1xx411c7mD</code>（cid为<code>62131</code>）的 5000ms 位置发送一条弹幕<code>前来考古</code>（颜色为 #FFFFFF，字号 25，普通弹幕，游动弹幕）</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/post&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;type=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;oid=62131&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;msg=前来考古&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;aid=2&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;progress=5000&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;color=16777215&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;fontsize=25&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;pool=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mode=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;rnd=3456789987654321&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dmid&quot;</span><span class="token operator">:</span><span class="token number">32161968826613767</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dmid_str&quot;</span><span class="token operator">:</span><span class="token string">&quot;32161968826613767&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;visible&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="发送互动弹幕" tabindex="-1"><a class="header-anchor" href="#发送互动弹幕" aria-hidden="true">#</a> 发送互动弹幕</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/command/post</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>2020-09-25 B站更新了互动弹幕功能，包括UP主头像弹幕、关联视频弹幕、视频内嵌引导关注按钮三大功能</p><p>详情见：</p>`,19),A={href:"https://www.bilibili.com/read/cv7728299",target:"_blank",rel:"noopener noreferrer"},T={href:"https://www.bilibili.com/blackboard/activity-c8a0iDRQy.html",target:"_blank",rel:"noopener noreferrer"},j=a(`<p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>互动弹幕类型</td><td>必要</td><td>1：UP主头像弹幕<br>2：关联视频弹幕<br>5：视频内嵌引导关注按钮</td></tr><tr><td>aid</td><td>num</td><td>稿件avid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td>非必要</td><td>单位为毫秒<br>默认为0</td></tr><tr><td>plat</td><td>num</td><td>平台标识</td><td>必要</td><td>1：web端<br>2：安卓端<br>8：视频管理页面</td></tr><tr><td>data</td><td>str</td><td>json序列</td><td>必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>修改互动弹幕的弹幕id</td><td>非必要</td><td>注：修改弹幕<code>plat</code>必须为8</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><code>data</code>参数json序列：</p><p>类型为【UP主头像弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>msg</td><td>str</td><td>弹幕内容</td><td></td></tr></tbody></table><p>类型为【关联视频弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>msg</td><td>str</td><td>弹幕内容</td><td></td></tr><tr><td>bvid</td><td>str</td><td>关联视频的bvid</td><td></td></tr></tbody></table><p>类型为【视频内嵌引导关注按钮】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>duration</td><td>num</td><td>持续时间</td><td>单位为毫秒</td></tr><tr><td>posX</td><td>num</td><td>X坐标</td><td>区间：[118-549]</td></tr><tr><td>posY</td><td>num</td><td>Y坐标</td><td>区间：[82-293]</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>-500：服务器错误<br>36711：该视频禁止发送弹幕<br>79026：发送失败，请勿填写当前稿件bvid<br>79024：发送失败，请输入正确的bvid<br>79036：该指令弹幕超出限制<br>79037：关注弹幕坐标溢出</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>正确时：obj<br>错误时：null</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>command</td><td>str</td><td>指令？</td><td>UP主头像弹幕：#UP#<br>关联视频弹幕：#LINK#<br>视频内嵌引导关注按钮：#ATTENTION#</td></tr><tr><td>content</td><td>str</td><td>弹幕内容</td><td></td></tr><tr><td>extra</td><td>str</td><td>弹幕数据</td><td>json序列</td></tr><tr><td>id</td><td>num</td><td>弹幕dmid</td><td></td></tr><tr><td>idStr</td><td>str</td><td>弹幕dmid</td><td>字串形式</td></tr><tr><td>mid</td><td>num</td><td>用户mid</td><td></td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td></td></tr><tr><td>progress</td><td>num</td><td>弹幕出现在视频内的时间</td><td></td></tr><tr><td>type</td><td>num</td><td>互动弹幕类型</td><td>1：UP主头像弹幕<br>2：关联视频弹幕<br>5：视频内嵌引导关注按钮</td></tr></tbody></table><p><code>extra</code>序列数据：</p><p>类型为【UP主头像弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>icon</td><td>str</td><td>UP主头像url</td><td></td></tr></tbody></table><p>类型为【关联视频弹幕】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>aid</td><td>num</td><td>关联视频的avid</td><td></td></tr><tr><td>title</td><td>str</td><td>关联视频的标题</td><td></td></tr><tr><td>bvid</td><td>str</td><td>关联视频的bvid</td><td></td></tr></tbody></table><p>类型为【视频内嵌引导关注按钮】时：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>duration</td><td>num</td><td>持续时间</td><td>单位为毫秒</td></tr><tr><td>posX</td><td>num</td><td>X坐标</td><td>区间：[118-549]</td></tr><tr><td>posY</td><td>num</td><td>Y坐标</td><td>区间：[82-293]</td></tr><tr><td>icon</td><td>str</td><td>按钮图片url</td><td>不应该是关注按钮吗，但这个是圆形的</td></tr><tr><td>type</td><td>num</td><td>关注按钮类型</td><td>0：仅关注<br>1：仅三联<br>2：关注+三联</td></tr></tbody></table><p><strong>示例：</strong></p><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送一条UP主头像弹幕<code>test</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;type=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;aid=201947622&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=230709860&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;progress=5000&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;plat=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;data={&quot;msg&quot;:&quot;test&quot;}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">39053842117558279</span><span class="token punctuation">,</span>
        <span class="token property">&quot;oid&quot;</span><span class="token operator">:</span> <span class="token number">230709860</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#UP#&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;icon\\&quot;:\\&quot;http://i0.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg\\&quot;}&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;idStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;39053842117558279&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送一条发送关联视频弹幕<code>测试1234</code>关联视频为<code>BV1kz4y1X7XP</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;type=2&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;aid=201947622&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=230709860&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;progress=5000&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;plat=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;data={&quot;bvid&quot;:&quot;BV1kz4y1X7XP&quot;,&quot;msg&quot;:&quot;测试1234&quot;}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">39054383689236483</span><span class="token punctuation">,</span>
        <span class="token property">&quot;oid&quot;</span><span class="token operator">:</span> <span class="token number">230709860</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#LINK#&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试1234&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;progress&quot;</span><span class="token operator">:</span> <span class="token number">11925</span><span class="token punctuation">,</span>
        <span class="token property">&quot;extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;aid\\&quot;:583785685,\\&quot;title\\&quot;:\\&quot;【cmd】访问api 命令行也能上B站\\&quot;,\\&quot;bvid\\&quot;:\\&quot;BV1kz4y1X7XP\\&quot;}&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;idStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;39054383689236483&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>为视频<code>av201947622</code>（cid为<code>230709860</code>）的5000ms位置发送视频内嵌引导关注按钮，X坐标为118，Y坐标为82，持续时间为5000ms</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/command/post&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;type=5&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;aid=201947622&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=230709860&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;progress=5000&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;plat=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;data={&quot;duration&quot;:5000,&quot;posX&quot;:118,&quot;posY&quot;:82}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">39055158405496839</span><span class="token punctuation">,</span>
        <span class="token property">&quot;oid&quot;</span><span class="token operator">:</span> <span class="token number">230709860</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ATTENTION#&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;progress&quot;</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
        <span class="token property">&quot;extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;duration\\&quot;:5000,\\&quot;posX\\&quot;:118,\\&quot;posY\\&quot;:82}&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;idStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;39055158405496839&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="发送打分弹幕" tabindex="-1"><a class="header-anchor" href="#发送打分弹幕" aria-hidden="true">#</a> 发送打分弹幕</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/command/grade/post</p></blockquote><p><em>请求方式: POST</em></p><p>认证方式: Cookie (SESSDATA)</p>`,35),w=a(`<p><strong>正文参数 (application/x-www-form-urlencoded):</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>aid</td><td>num</td><td>稿件 aid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>分 P cid</td><td>必要</td><td></td></tr><tr><td>progress</td><td>num</td><td>播放进度</td><td>必要</td><td>单位为毫秒</td></tr><tr><td>grade_id</td><td>num</td><td>打分 id</td><td>必要</td><td></td></tr><tr><td>grade_score</td><td>num</td><td>分数</td><td>偶数, 最大 10</td><td></td></tr><tr><td>polaris_app_id</td><td>num</td><td>100</td><td>不必要</td><td></td></tr><tr><td>polaris_platfrom</td><td>num</td><td>5</td><td>不必要</td><td></td></tr><tr><td>spmid</td><td>str</td><td>333.788.0.0</td><td>不必要</td><td></td></tr><tr><td>from_spmid</td><td>str</td><td>来源 spmid</td><td>不必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token (即 Cookie 中的 bili_jct)</td><td>必要</td><td></td></tr></tbody></table><p><strong>JSON回复:</strong></p><p>根对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0: 成功</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为 0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象:</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td></td></tr><tr><td>dmid_str</td><td>str</td><td>弹幕dmid</td><td>字串形式</td></tr><tr><td>visible</td><td>bool</td><td>是否可见</td><td></td></tr><tr><td>action</td><td>str</td><td>动作</td><td><code>&quot;grade:&quot;</code> + (请求的分数 / 2)</td></tr></tbody></table><p><strong>示例:</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/command/grade/post&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;aid=112861976201494&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=500001629877726&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;progress=32000&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;grade_id=3651137&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;grade_score=10&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例:</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dmid&quot;</span><span class="token operator">:</span> <span class="token number">1651556419721443584</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dmidStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1651556419721443584&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;visible&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;grade:5&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="撤回弹幕" tabindex="-1"><a class="header-anchor" href="#撤回弹幕" aria-hidden="true">#</a> 撤回弹幕</h2><blockquote><p>https://api.bilibili.com/x/dm/recall</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>仅能撤回自己两分钟内的弹幕，且每天只有3次机会</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-400：请求错误<br>-404：无此项<br>36301：撤回失败，弹幕发送已过2分钟<br>36302：撤回失败，弹幕已经被删除或撤回<br>36303：撤回失败，今天撤回的机会已经用完<br>36304：撤回失败，服务器出错</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>成功后显示剩余次数</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>撤回<code>cid=168901231</code>下的弹幕<code>32310301474947077</code>的弹幕</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/dm/recall&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=168901231&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;dmid=32310301474947077&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;撤回成功，你还有3次撤回机会&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="购买高级弹幕发送权限" tabindex="-1"><a class="header-anchor" href="#购买高级弹幕发送权限" aria-hidden="true">#</a> 购买高级弹幕发送权限</h2><blockquote><p>https://api.bilibili.com/x/dm/adv/buy</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p>购买一次需要2硬币，同时向up主发送请求</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>mode</td><td>str</td><td>sp</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-102：账号被封停<br>-111：csrf校验失败<br>-107：硬币不足<br>-400：请求错误<br>36007：不允许购买<br>36009：正在确认中<br>36010：已购买</td></tr><tr><td>message</td><td>str</td><td>返回信息</td><td></td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p>示例：</p><p>购买视频cid为<code>168901231</code>的高级弹幕发送权限</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/dm/adv/buy&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=168901231&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;mode=sp&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;已成功购买&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="检测高级弹幕发送权限" tabindex="-1"><a class="header-anchor" href="#检测高级弹幕发送权限" aria-hidden="true">#</a> 检测高级弹幕发送权限</h2><blockquote><p>https://api.bilibili.com/x/dm/adv/state</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>mode</td><td>str</td><td>sp</td><td>必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>--400：请求错误</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>有效时：obj<br>无效时：null</td><td>有效时：信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>coins</td><td>num</td><td>需要支付的硬币数</td><td></td></tr><tr><td>confirm</td><td>num</td><td>是否同意</td><td>1：同意<br>2：未同意<br>未购买时无此项</td></tr><tr><td>accept</td><td>bool</td><td>是否允许申请</td><td>true：允许<br>false：不允许</td></tr><tr><td>hasBuy</td><td>bool</td><td>是否已购买</td><td>true：已购买<br>未购买时无此项</td></tr></tbody></table><p><strong>示例：</strong></p><p>查询视频cid为<code>168901231</code>的视频高级弹幕权限购买状态</p><p>当前状态为已购买且同意</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.bilibili.com/x/dm/adv/state&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=168901231&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;mode=sp&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;coins&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">&quot;confirm&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;accept&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;hasBuy&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="点赞弹幕" tabindex="-1"><a class="header-anchor" href="#点赞弹幕" aria-hidden="true">#</a> 点赞弹幕</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/thumbup/add</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p>`,58),C=a(`<p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP 登录 Token</td><td>APP 方式必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>目标弹幕 dmid</td><td>必要</td><td></td></tr><tr><td>oid</td><td>num</td><td>目标弹幕所在视频 cid</td><td>必要</td><td></td></tr><tr><td>op</td><td>num</td><td>操作</td><td>必要</td><td>1：点赞<br>2：取消点赞</td></tr><tr><td>platform</td><td>str</td><td>平台标识</td><td>非必要</td><td>web_player：web 播放器<br>android：安卓端</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于 Cookie）</td><td>Cookie 方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>36106：该弹幕已被删除<br>36805：该视频禁止点赞弹幕<br>65004：取消赞失败 未点赞过<br>65006：已赞过</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>tll</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>为<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>点赞</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/thumbup/add&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;dmid=35600074482384899&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;oid=145928946&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;op=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;platform=web_player&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="举报弹幕" tabindex="-1"><a class="header-anchor" href="#举报弹幕" aria-hidden="true">#</a> 举报弹幕</h2><blockquote><p>https://api.bilibili.com/x/dm/report/add</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）或APP</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>cid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmid</td><td>num</td><td>弹幕dmid</td><td>必要</td><td></td></tr><tr><td>reason</td><td>num</td><td>举报类型</td><td>必要</td><td><strong>类型代码见下表</strong></td></tr><tr><td>content</td><td>str</td><td>其他举报备注</td><td>非必要</td><td><code>reason=11</code>时有效</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p>举报类型<code>reason</code>：</p><table><thead><tr><th>代码</th><th>含义</th></tr></thead><tbody><tr><td>1</td><td>违法违禁</td></tr><tr><td>2</td><td>色情低俗</td></tr><tr><td>3</td><td>赌博诈骗</td></tr><tr><td>4</td><td>人身攻击</td></tr><tr><td>5</td><td>侵犯隐私</td></tr><tr><td>6</td><td>垃圾广告</td></tr><tr><td>7</td><td>引战</td></tr><tr><td>8</td><td>剧透</td></tr><tr><td>9</td><td>恶意刷屏</td></tr><tr><td>10</td><td>视频无关</td></tr><tr><td>11</td><td>其他</td></tr><tr><td>12</td><td>青少年不良</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>36201：举报弹幕不存在<br>36203：举报原因类型错误<br>36204：已举报</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为空</td></tr><tr><td>tll</td><td>num</td><td>1</td><td>举报失败时</td></tr></tbody></table><p><strong>示例</strong></p><p>举报<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>，理由是<code>引战</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/dm/report/add&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;cid=145928946&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;dmid=35600074482384899&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;reason=7&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="保护-删除弹幕" tabindex="-1"><a class="header-anchor" href="#保护-删除弹幕" aria-hidden="true">#</a> 保护&amp;删除弹幕</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/edit/state</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA） 或APP</p><p>注：只能操作自己的稿件或有骑士权限的稿件</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmids</td><td>nums</td><td>弹幕dmid</td><td>必要</td><td>多个id之间用<code>,</code>分隔</td></tr><tr><td>state</td><td>num</td><td>操作代码</td><td>必要</td><td>1：删除弹幕<br>2：弹幕保护<br>3：取消保护</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>-403：访问权限不足</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>删除<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>、<code>39067304918515717</code>、<code>39082777041174531</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/edit/state&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;type=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;oid=145928946&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;dmids=35600074482384899,39067304918515717,39082777041174531&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;state=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="修改字幕池" tabindex="-1"><a class="header-anchor" href="#修改字幕池" aria-hidden="true">#</a> 修改字幕池</h2><blockquote><p>https://api.bilibili.com/x/v2/dm/edit/pool</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA） 或APP</p><p>注：只能操作自己的稿件或有骑士权限的稿件</p><p><strong>正文参数（ application/x-www-form-urlencoded ）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>access_key</td><td>str</td><td>APP登录Token</td><td>APP方式必要</td><td></td></tr><tr><td>type</td><td>num</td><td>弹幕类选择</td><td>必要</td><td>1：视频弹幕</td></tr><tr><td>oid</td><td>num</td><td>视频cid</td><td>必要</td><td></td></tr><tr><td>dmids</td><td>nums</td><td>弹幕dmid</td><td>必要</td><td>多个id之间用<code>,</code>分隔</td></tr><tr><td>pool</td><td>num</td><td>操作代码</td><td>必要</td><td>0：移出字幕池<br>1：移入字幕池</td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>Cookie方式必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-111：csrf 校验失败<br>-400：请求错误<br>-403：访问权限不足</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr></tbody></table><p><strong>示例</strong></p><p>将<code>cid=145928946</code>下的弹幕<code>35600074482384899</code>、<code>39067304918515717</code>、<code>39082777041174531</code>移入字幕池</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.bilibili.com/x/v2/dm/edit/state&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;type=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;oid=145928946&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;pool=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;dmids=35600074482384899,39067304918515717,39082777041174531&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,52);function E(D,F){const d=p("RouterLink"),o=p("ExternalLinkIcon");return i(),l("div",null,[b,t("table",null,[m,t("tbody",null,[k,v,t("tr",null,[h,g,q,y,t("td",null,[s("参见 "),n(d,{to:"/docs/misc/sign/wbi.html"},{default:e(()=>[s("Wbi 签名")]),_:1})])]),t("tr",null,[x,S,f,_,t("td",null,[s("参见 "),n(d,{to:"/docs/misc/sign/wbi.html"},{default:e(()=>[s("Wbi 签名")]),_:1})])])])]),P,t("p",null,[t("a",A,[s("【客户端更新】6.10版本更新！UP主支持发布关联视频弹幕"),n(o)])]),t("p",null,[t("a",T,[s("引导关注卡片"),n(o)])]),j,c(`{
  "gh": [220]
}`),w,t("p",null,[s("查询指定弹幕点赞状态参阅文档 "),n(d,{to:"/docs/danmaku/thumbup.html"},{default:e(()=>[s("弹幕点赞查询")]),_:1})]),C])}const X=r(u,[["render",E],["__file","action.html.vue"]]);export{X as default};
